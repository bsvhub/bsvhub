/*index*/
/* ------------------------------------------------------------
   üìè PAGE WIDTH OVERFLOW CONTROL
   ------------------------------------------------------------
   The page has a minimum width controlled by ONE CSS variable:
   --page-min-width (defined in :root, default: 800px)
   
   When the browser window becomes narrower than this value,
   a horizontal scrollbar appears instead of content continuing
   to shrink/wrap. This prevents header buttons from becoming
   too cramped.
   
   üéØ TO ADJUST: Change only --page-min-width in :root section
   
   Recommended values:
   - 700px = compact (buttons may feel tight)
   - 800px = comfortable (default)
   - 900px = spacious (extra breathing room)
------------------------------------------------------------ */

/* ------------------------------------------------------------
   0 ‚Äì MOBILE / DESKTOP TOGGLE BLINK FEEDBACK
   1 ‚Äì GLOBAL / RESET / BASE FONTS
   2 ‚Äì BACKGROUND LAYERS (LAYER 0)
   3 ‚Äì TOP-UI (HEADER + TAB BAR + TOOLTIP)  [LAYER 1]
   4 ‚Äì TOOLTIP BAR
   5 ‚Äì CONTENT AREA (LAYER 2)
   6 ‚Äì ICON GRID MODULE
   7 ‚Äì HEADER-TAB TEXT SECTIONS
   8 ‚Äì SEARCH BAR (MATCHES TAB STYLE)
   9 ‚Äì COPY BUTTON (TIP SECTION)
   10 ‚Äì LINK STYLE (inside Contact; "BSVhub")
------------------------------------------------------------ */

/* =====================================================
   0 ‚Äì MOBILE / DESKTOP TOGGLE BLINK FEEDBACK
===================================================== */
@keyframes toggle-blink {
    0%   { opacity: 1; }
    50%  { opacity: 0.3; }
    100% { opacity: 1; }
}

.blink {
    animation: toggle-blink 0.15s linear;
}

/* =====================================================
   1 ‚Äì PAGE WRAPPER FADE TRANSITION FOR MOBILE/DESKTOP
===================================================== */
#page-wrapper {
    transition: opacity 0.2s ease;
    opacity: 1;
}

#page-wrapper.fading {
    opacity: 0.2;
}


/* ============================================================
   1 ‚Äì GLOBAL / RESET / BASE FONTS
   ============================================================ */
@font-face {
    font-family: 'vt323';
    src: url('assets/vt323.ttf') format('truetype');
}
@font-face {
    font-family: 'dotm';
    src: url('assets/dotm.ttf') format('truetype');
}
@font-face {
    font-family: 'dotmb';
    src: url('assets/dotmb.ttf') format('truetype');
}
@font-face {
    font-family: 'jb';
    src: url('assets/jetbrains.ttf') format('truetype');
}
@font-face {
    font-family: 'jbm';
    src: url('assets/jetbrainsm.ttf') format('truetype');
}
@font-face {
    font-family: 'jbb';
    src: url('assets/jetbrainsb.ttf') format('truetype');
}

:root {
    --tooltip-speed: 0.45s;
    --top-ui-shadow: rgba(0,0,0,0.7);
    
    /* Font definitions for each section */
    --font-header: 'dotmb', monospace;
    --font-tab: 'jbm', monospace;
    --font-tooltip: 'jb', monospace;
    --font-icon-grid: 'jb', monospace;
    --font-header-content: 'vt323', monospace;
    
    /* ============================================================
       üìè PAGE MINIMUM WIDTH - CHANGE ONLY THIS ONE VALUE!
       ============================================================ */
    --page-min-width: 800px;   /* üëà Minimum page width before horizontal scroll appears */
                               /*    Recommended values:
                               /*    - 700px = compact (buttons may feel tight)
                               /*    - 800px = comfortable (default)
                               /*    - 900px = spacious (extra breathing room) */
    
    /* ============================================================
       üéØ ICON SIZE CONFIGURATION - CHANGE ONLY THESE TWO VALUES!
       ============================================================ */
    --icon-min-size: 160px;    /* üëà Minimum icon size (narrow screens) */
    --icon-max-size: 220px;    /* üëà Maximum icon size (wide screens) */
    
    /* ============================================================
       ‚öôÔ∏è AUTO-CALCULATED VALUES - DO NOT MODIFY THESE
       All other dimensions scale proportionally from the two values above
       ============================================================ */
    
    /* Base wrapper size - uses clamp() to smoothly scale between min and max */
    --wrapper-size: clamp(var(--icon-min-size), 26vw, var(--icon-max-size));
    
    /* Horizontal padding - scales at 9.375% of wrapper size
       (was 15px/160px = 9.375% at min, 24px/256px = 9.375% at max) */
    --horizontal-padding: calc(var(--wrapper-size) * 0.09375);
    
    /* Image area height - scales at 80% of wrapper size to maintain proportion
       (was 160px/208px = 76.9% originally, adjusted to 80% for better fit) */
    --image-max-height: calc(var(--wrapper-size) * 0.8);
    
    /* Badge size - 25% of wrapper (consistent across all sizes) */
    --badge-size: calc(var(--wrapper-size) * 0.25);
}

html {
    box-sizing: border-box;
    background-color: rgb(40, 30, 90);
    height: 100%;
}

*, *::before, *::after {
    box-sizing: inherit;
}

body {
    margin: 0;
    padding: 0;
    font-size: 1.2rem;
    letter-spacing: 2px;
    overflow-x: auto;          /* Allows horizontal scroll when needed */
    min-height: 100%;
    color: white;
    min-width: var(--page-min-width);  /* üëà Uses centralized variable */
}

/* ============================================================
   PAGE WRAPPER ‚Äì ALLOW FULL DOCUMENT HEIGHT
   ============================================================ */

#page-wrapper {
    position: relative;
    min-height: 100vh;
    min-width: var(--page-min-width);  /* üëà Uses centralized variable */
}

/* ============================================================
   2 ‚Äì BACKGROUND LAYERS - PAGE HEIGHT AWARE [LAYER 0] 
   ============================================================ */

#background-layer,
#firefly-layer {
  position: fixed;
  inset: 0;
  overflow: hidden;
  contain: layout paint;
  pointer-events: none;
  z-index: 0;
}

/* ============================================================
   3 ‚Äì TOP-UI (HEADER + TAB BAR + TOOLTIP)  [LAYER 1]
   ============================================================ */

#top-ui {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 5000;
    display: flex;
    flex-direction: column;
    background: transparent;
    pointer-events: auto;
    min-width: var(--page-min-width);  /* üëà Uses centralized variable */
}

/* ------------------------------------------------------------
   HEADER BAR
------------------------------------------------------------ */
.header-container {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    padding: 0 12px;
    background: rgba(25, 25, 25, 0.6);
    min-width: var(--page-min-width);  /* üëà Uses centralized variable */
}

.header-title {
    font-family: var(--font-header);
    font-size: clamp(1rem, 5vw, 3.2rem);
    justify-self: center;
    white-space: nowrap;
    margin: 0;
    color: #EAB300;
    min-width: fit-content;     /* üëà NEW - prevents title from collapsing */
}

.header-icons {
    display: flex;
    gap: 10px;
}

.header-icons-left {
    justify-content: flex-start;
}
.header-icons-right {
    justify-content: flex-end;
}

/* Header buttons settings */
.header-text-link {
    display: inline-flex;
    align-items: center;
    padding: 12px 18px;
    min-height: 32px;
    font-size: 1.3rem;         /* üëà CHANGED - fixed size instead of clamp */
                               /*    This prevents buttons from shrinking below readable size */
                               /*    Adjust this value if buttons are too large/small:
                               /*    - 1.1rem = smaller, more compact
                               /*    - 1.3rem = current (good balance)
                               /*    - 1.5rem = larger, more prominent */
    font-family: var(--font-header);
    color: #ffcc66;
    background: rgba(255,255,255,0.1);
    border-radius: 10px;
    text-decoration: none;
    transition: background 0.25s;
    white-space: nowrap;       /* üëà NEW - prevents text from wrapping */
}

.header-text-link span {
    display: inline-block;
    transition: transform 0.25s;
}

.header-text-link:hover {
    background: rgba(255,204,102,0.8);
    color: black;
}

.header-text-link:hover span {
    transform: scale(1.3);
}

.header-text-link.active {
    background: #b8860b;
    color: black;
    box-shadow: 0 0 15px rgba(184,134,11,0.7);
}

/* ------------------------------------------------------------
   TAB BAR
------------------------------------------------------------ */

/* TAB BAR container */
.tab-bar {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    row-gap: 10px;
    gap: 10px;
    padding: 12px;
    background-color: rgba(25, 25, 25, 0.6);
    box-shadow: none;
    font-family: var(--font-tab);
    min-width: var(--page-min-width);  /* üëà Uses centralized variable */
}

/* Tab buttons and search - unified sizing */
.tab-bar button,
#search-box {
    font-family: var(--font-tab);
    font-size: 1.3rem;         /* üëà CHANGED - fixed size instead of clamp */
                               /*    Prevents tab buttons from shrinking */
                               /*    Adjust to match header buttons if needed */
    padding: 12px 18px;
    min-height: 48px;
}

/* ------------------------------------------------------------
   TAB BUTTONS
------------------------------------------------------------ */
.tab-bar button {
    flex: 0 0 auto;
    min-width: 100px;
    white-space: nowrap;       /* Already here - good! Prevents text wrapping */
    color: white;
    background: rgba(255,255,255,0.1);
    border: 2px solid #ff5733;
    border-radius: 10px;
    transition: background 0.25s;
}

.tab-bar button span {
    display: inline-block;
    transition: transform 0.25s;
}

.tab-bar button:hover {
    background: rgba(255,87,51,0.8);
}

.tab-bar button:hover span {
    transform: scale(1.2);
}

.tab-bar button.active {
    background: #ff5733;
    color: black;
    box-shadow: 0 0 12px rgba(255,87,51,0.6);
}

/* ------------------------------------------------------------
   SEARCH BOX (matches tab style)
------------------------------------------------------------ */
#search-box {
    max-width: 180px;
    box-sizing: border-box;
    border-radius: 10px;
    background: rgba(255,255,255,0.1);
    border: 2px solid rgba(255,204,102,0.4);
    color: white;
    outline: none;
    transition: background 0.25s, box-shadow 0.25s;
    letter-spacing: 0;
}

#search-box:hover {
    background: rgba(255,204,102,0.2);
    box-shadow: 0 0 12px rgba(255,204,102,0.7);
}

#search-box:focus {
    background: rgba(255,204,102,0.25);
    border-color: #ffcc66;
    box-shadow: 0 0 18px rgba(255,204,102,0.9);
}

#search-box::placeholder {
    color: rgba(200,200,200,0.7);
}


/* ============================================================
 4 ‚Äì TOOLTIP BAR
============================================================ */
#tooltip-display {
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-wrap: wrap;
  padding: 6px 14px;
  min-height: 32px;
  max-height: 32px;
  white-space: normal;
  word-break: break-word;
  overflow-wrap: anywhere;
  font-family: var(--font-tooltip);
  font-size: 1.2rem;
  color: #fada4e;
  text-align: center;
  background: rgba(25, 25, 25, 0.6);
  transition: max-height var(--tooltip-speed) ease;
}

#tooltip-display.expanded {
  max-height: 180px;
}

#tooltip-display.marquee {
  overflow: hidden;
  white-space: nowrap;
}

@keyframes scroll-text {
    0%   { transform: translateX(0%); }
    100% { transform: translateX(-20%); }
}

#tooltip-display.marquee span {
    display: inline-block;
    padding-left: 0;
    white-space: nowrap;
    animation: scroll-text linear infinite;
    will-change: transform;
    transform: translate3d(0, 0, 0);
}

/* ============================================================
   5 ‚Äì CONTENT AREA (LAYER 2)
   ============================================================ */

#content-area {
    position: relative;
    z-index: 200;
    width: 100%;
    padding-bottom: 40px;
    transition: top var(--tooltip-speed) ease;
}

.tab-content {
    display: none;
    padding: 20px;
}

.tab-content.active {
    display: block;
    animation: fadeIn 0.4s ease;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(12px); }
    to   { opacity: 1; transform: translateY(0); }
}

/* ============================================================
   6 ‚Äì ICON GRID MODULE
   ============================================================ */

ul.icon-grid {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
    margin: 0 auto;
    padding: 10px;
}

ul.icon-grid li {
    list-style: none;
    display: flex;
    justify-content: center;
}

ul.icon-grid li a {
    padding: 0;
    border: 4px solid #000000; /* icon border colour */
    background: rgba(121, 139, 178, 0.5); /* icon colour */
    border-radius: 20px;
    text-decoration: none;
    color: rgba(135,206,235,0.8);
    transition: background 0.25s, border-color 0.25s, transform 0.25s;
    overflow: hidden;
}

ul.icon-grid li a:hover {
    background: rgba(15, 175, 240, 0.6); /* icon colour when hover */
    border-color: #cc0022;
}

/* ============================================================
   üì¶ ICON WRAPPER - SIMPLIFIED CONFIGURATION SYSTEM
   
   ‚úÖ All dimensions now auto-calculate from --icon-min-size 
      and --icon-max-size (defined in :root above)
   
   üé® Visual proportions remain identical to original design
   
   üîß To resize icons, simply change the two CSS variables:
      --icon-min-size (default: 160px)
      --icon-max-size (default: 256px)
   ============================================================ */
.icon-wrapper {
    /* Use pre-calculated CSS variables from :root */
    position: relative;
    width: var(--wrapper-size);           /* Auto-scales between min and max */
    height: var(--wrapper-size);          /* Square proportions maintained */
    overflow: visible;
    padding: 0 var(--horizontal-padding); /* Proportional padding (9.375% of size) */
}

/* ============================================================
   6B ‚Äì ZOOM CONTROL & 4-POSITION BADGE SYSTEM
   
   üìç Badge positions scale with icon size
   üéØ "zoom": 1.0 in JSON = image fits perfectly within icon
   üîç "zoom": 1.9 = image is 1.9x larger (can exceed boundaries)
   ============================================================ */

/* Badge positions - shared styles */
.icon-wrapper [class*="icon-badge-pos"] {
    position: absolute;
    width: var(--badge-size);  /* 25% of wrapper size */
    pointer-events: none;
    z-index: 2;
}

.icon-wrapper .icon-badge-pos1 { top: 0; left: 0; }
.icon-wrapper .icon-badge-pos2 { top: 30%; left: 0; }
.icon-wrapper .icon-badge-pos3 { top: 0; right: 0; }
.icon-wrapper .icon-badge-pos4 { top: 30%; right: 0; }

/* ============================================================
   üñºÔ∏è MAIN ICON IMAGE - CENTERED WITH ZOOM SUPPORT
   
   üìê Positioned in top 80% of wrapper with 6% offset
   üîç --icon-zoom variable (from JSON) controls scaling:
      - zoom: 1.0 = fits within boundaries
      - zoom: 1.5 = 1.5x larger
      - zoom: 1.9 = 1.9x larger (your example)
   ‚ö° Hover adds 15% additional zoom (multiplicative)
   ============================================================ */
.icon-wrapper img:not([class*="icon-badge-pos"]) {
    position: absolute;
    /* Center point is 6% down + half of image area height */
    top: calc(6% + var(--image-max-height) / 2);
    left: 50%;
    /* Apply JSON zoom value (default 1.0 if not specified) */
    transform: translate(-50%, -50%) scale(var(--icon-zoom, 1.0));
    /* Max dimensions ensure zoom: 1.0 fits perfectly */
    max-width: calc(100% - 2 * var(--horizontal-padding));
    max-height: var(--image-max-height);  /* 80% of wrapper height */
    object-fit: contain;
    transition: transform 0.25s;
}

/* Hover zoom - multiplies the JSON zoom by 1.15 */
ul.icon-grid li a:hover .icon-wrapper img:not([class*="icon-badge-pos"]) {
    transform: translate(-50%, -50%) scale(calc(var(--icon-zoom, 1.0) * 1.15));
}

/* ============================================================
   üìù ICON TEXT - BOTTOM LABEL AREA
   
   üìè Scales proportionally with icon size
   üé® Background overlay for readability
   ============================================================ */
.icon-text {
    position: absolute;
    bottom: 4px;
    left: 0;
    width: 100%;
    display: flex;
    align-items: flex-end;
    justify-content: center;
    text-align: center;
    white-space: normal;
    overflow-wrap: break-word;
    word-break: break-word;
    padding: 0 16px;
    line-height: 1.2;
    font-family: var(--font-icon-grid);
    color: #ffffff;
    pointer-events: none;
    background-color: rgba(0, 0, 0, 0.2);
    transition: color 0.2s ease, transform 0.2s ease;
}

/* Text hover effect */
ul.icon-grid li a:hover .icon-text {
    color: #fdfdfd;
    background-color: rgba(0, 0, 0, 0.4);
    transform: scale(1.15);
}


/* ============================================================
   7 ‚Äì HEADER-TAB TEXT SECTIONS (About / Tip / Contact)
   ============================================================ */

.header-tab-content {
    text-align: center;
    font-family: var(--font-header-content);
}

.header-tab-text {
    margin: 0 auto;
    font-size: 2rem;
    color: #ffd700;
    text-align: center;
    font-family: var(--font-header-content);
}

/* ============================================================
   9 ‚Äì COPY BUTTON (TIP SECTION)
   ============================================================ */

.copy-btn {
    margin-left: 12px;
    padding: 8px 14px;
    font-size: 1.4rem;
    font-family: var(--font-header-content);
    background: #ffcc66;
    border: 2px solid #b8860b;
    color: black;
    border-radius: 10px;
    cursor: pointer;
    transition: background 0.2s, transform 0.2s;
}

.copy-btn:hover {
    background: #ffd98c;
    transform: scale(1.08);
}

.copy-btn:active {
    transform: scale(0.96);
}

/* ============================================================
   10 ‚Äì LINK STYLE (inside Contact; "BSVhub")
   ============================================================ */
.header-tab-text a {
    color: #FF6600;                  /* orange link color */
    font-weight: normal;             /* remove bold */
    text-decoration: none;           /* no underline */
    background: transparent;         /* remove background */
    padding: 0;                      /* remove padding */
    border-radius: 0;                /* remove rounded corners */
    transition: color 0.25s ease;
}

.header-tab-text a:hover,
.header-tab-text a:focus {
    background: transparent;         /* no background */
    box-shadow: none;                /* no glow */
    text-decoration: underline;      /* underline on hover */
}

/* ============================================================
   11 ‚Äì SOCIAL MEDIA ICONS (Contact Section)
   ============================================================ */
.social-icons {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
    margin-top: 15px;
}

.social-icons a {
    display: inline-block;
    transition: transform 0.25s ease, opacity 0.25s ease;
}

.social-icons a:hover {
    transform: scale(1.2);
    opacity: 0.8;
}

.social-icons img {
    width: 48px;
    height: 48px;
    display: block;
}

/* ############################################################
   ############################################################
   
   üì± MOBILE MODE - ACTIVATED WITH body.mobile-mode CLASS
   
   Uses CSS transform scale() to enlarge everything while
   maintaining the same layout logic as desktop mode.
   
   ############################################################
   ############################################################ */

/* üì± MOBILE - Scale variables */
body.mobile-mode {
    /* Mobile scale factor - change this to scale entire UI */
    --mobile-scale: 1.6;         /* üëà Adjust this value (1.4-1.8 recommended) */
    
    /* Header sections scale (About/Tip/Contact) */
    --header-section-scale: 1;   /* üëà Adjust separately from main content */
}

/* üì± MOBILE - Document overflow control */
body.mobile-mode,
body.mobile-mode html {
    min-height: 100svh;
    overflow: hidden;
}

body.mobile-mode {
    min-width: unset;            /* Remove desktop min-width */
}

/* üì± MOBILE - Page wrapper */
body.mobile-mode #page-wrapper {
    overflow: hidden;
    min-height: 100svh;
    min-width: unset;            /* Remove desktop min-width */
}

/* üì± MOBILE - Content area with transform scaling */
/* This is the KEY to mobile mode - it scales everything up while
   maintaining the exact same layout logic as desktop */
body.mobile-mode #content-area {
    position: relative;
    z-index: 200;
    top: 0 !important;           /* Force - ignore JS positioning */
    
    /* Calculate dimensions to account for scale */
    width: calc(100% / var(--mobile-scale));
    min-height: calc(100svh / var(--mobile-scale));
    max-height: calc(100svh / var(--mobile-scale));
    
    /* Enable scrolling */
    overflow-y: auto;
    overflow-x: hidden;
    
    /* Apply the scale transform */
    transform: scale(var(--mobile-scale));
    transform-origin: top left;
    
    /* Padding to account for header height */
    padding-top: calc(var(--top-ui-height, 0px) / var(--mobile-scale));
    padding-bottom: calc(40px / var(--mobile-scale));  /* Bottom padding */
}

/* üì± MOBILE - Remove desktop UI min-widths */
body.mobile-mode #top-ui,
body.mobile-mode .header-container,
body.mobile-mode .tab-bar {
    min-width: unset;
}

/* üì± MOBILE - Header layout: vertical button stacks */
body.mobile-mode .header-container {
    display: flex;
    flex-wrap: nowrap;
    justify-content: space-between;
    gap: 12px;
    padding: 8px 12px;
}

body.mobile-mode .header-icons-left,
body.mobile-mode .header-icons-right {
    flex-direction: column;
    gap: 8px;
}

/* üì± MOBILE - Scale all UI elements */
body.mobile-mode .header-title {
    font-size: calc(3.2rem * var(--mobile-scale));
}

body.mobile-mode .header-text-link {
    font-size: calc(1.3rem * var(--mobile-scale));
    padding: calc(12px * var(--mobile-scale)) calc(18px * var(--mobile-scale));
}

body.mobile-mode .tab-bar button,
body.mobile-mode #search-box {
    font-size: calc(1.3rem * var(--mobile-scale));
    padding: calc(12px * var(--mobile-scale)) calc(18px * var(--mobile-scale));
    min-height: calc(48px * var(--mobile-scale));
}

body.mobile-mode #tooltip-display {
    font-size: calc(1.2rem * var(--mobile-scale));
    min-height: calc(32px * var(--mobile-scale));
    max-height: calc(32px * var(--mobile-scale));
    padding: calc(6px * var(--mobile-scale)) calc(14px * var(--mobile-scale));
}

body.mobile-mode #tooltip-display.expanded {
    max-height: calc(180px * var(--mobile-scale));
}

/* üì± MOBILE - Header tab content sections (About/Tip/Contact) */
body.mobile-mode .header-tab-content {
    font-size: calc(1rem * var(--header-section-scale));
}

body.mobile-mode .header-tab-text {
    font-size: calc(2rem * var(--header-section-scale));
}

body.mobile-mode .copy-btn {
    font-size: calc(1.4rem * var(--header-section-scale));
    padding: calc(8px * var(--header-section-scale)) calc(14px * var(--header-section-scale));
}

/* üì± MOBILE - Icon text scaling */
body.mobile-mode .icon-text {
    font-size: calc(1rem * var(--mobile-scale));
    padding: calc(0px * var(--mobile-scale)) calc(6px * var(--mobile-scale));
}

/* üì± MOBILE - Double-tap selected state */
/* Visual feedback for first tap (shows tooltip) */
body.mobile-mode ul.icon-grid li a.mobile-selected {
    background: rgba(15, 175, 240, 0.6);  /* Same as desktop :hover */
    border-color: #00ff00;                /* üëà GREEN border for mobile selection */
    transform: scale(1.04);
}

/* üì± MOBILE - Touch optimization */
body.mobile-mode .header-text-link,
body.mobile-mode .icon-wrapper,
body.mobile-mode .tab-content a {
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
}

/* üì± MOBILE - Disable hover scale effects on buttons (not needed for touch) */
body.mobile-mode .header-text-link:hover span,
body.mobile-mode .tab-bar button:hover span {
    transform: none;
}

body.mobile-mode ul.icon-grid li a:hover {
    transform: none;
}

/* NOTE: Image zoom on hover is NOT disabled in mobile mode.
   The desktop hover zoom logic (1.15x scale on icon images) works
   identically in mobile mode, sharing the same CSS from desktop. */

